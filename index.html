<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Consórcio - Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --primary-dark: #4f46e5;
            --accent: #06b6d4;
            --accent-light: #22d3ee;
            --success: #10b981;
            --success-light: #34d399;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #0f172a;
            --bg-card: #1e293b;
            --bg-card-hover: #334155;
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --text-dim: #64748b;
            --border: #334155;
            --glow-primary: rgba(99, 102, 241, 0.3);
            --glow-accent: rgba(6, 182, 212, 0.3);
            --glow-success: rgba(16, 185, 129, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated background */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 50%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(6, 182, 212, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 80%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* HEADER */
        .header {
            text-align: center;
            padding: 30px 0 10px;
        }
        .header-icon {
            font-size: 2.5em;
            margin-bottom: 8px;
        }
        .header h1 {
            font-size: 1.8em;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .header .subtitle {
            color: var(--text-muted);
            font-size: 0.95em;
            margin-top: 4px;
        }
        .header .contract-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        .header .contract-info span {
            color: var(--text-dim);
            font-size: 0.8em;
            background: var(--bg-card);
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid var(--border);
        }

        /* MOTIVATIONAL BANNER */
        .motivation {
            background: linear-gradient(135deg, var(--primary-dark), #7c3aed);
            border-radius: 16px;
            padding: 20px 30px;
            margin: 25px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .motivation::before {
            content: '';
            position: absolute;
            top: -50%; right: -20%;
            width: 300px; height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.08), transparent 70%);
            border-radius: 50%;
        }
        .motivation .phrase {
            font-size: 1.3em;
            font-weight: 700;
            position: relative;
        }
        .motivation .detail {
            color: rgba(255,255,255,0.75);
            font-size: 0.9em;
            margin-top: 6px;
            position: relative;
        }

        /* PROGRESS RING SECTION */
        .hero-section {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            margin: 25px 0;
            align-items: center;
        }

        .ring-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .progress-ring-wrap {
            position: relative;
            width: 250px;
            height: 250px;
        }
        .progress-ring-wrap svg {
            transform: rotate(-90deg);
            width: 250px;
            height: 250px;
        }
        .ring-bg {
            fill: none;
            stroke: var(--border);
            stroke-width: 14;
        }
        .ring-fill {
            fill: none;
            stroke: url(#ringGradient);
            stroke-width: 14;
            stroke-linecap: round;
            stroke-dasharray: 691.15;
            stroke-dashoffset: 691.15;
            transition: stroke-dashoffset 2s cubic-bezier(0.4, 0, 0.2, 1);
            filter: drop-shadow(0 0 8px var(--glow-primary));
        }
        .ring-center {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        .ring-percent {
            font-size: 3em;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-light), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }
        .ring-label {
            color: var(--text-muted);
            font-size: 0.85em;
            margin-top: 4px;
        }
        .ring-sub {
            color: var(--text-dim);
            font-size: 0.75em;
            margin-top: 15px;
            text-align: center;
        }

        /* HERO STATS */
        .hero-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .stat-card {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 20px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .stat-card:hover {
            transform: translateY(-3px);
            border-color: var(--primary);
            box-shadow: 0 8px 30px var(--glow-primary);
        }
        .stat-card .stat-icon {
            font-size: 1.5em;
            margin-bottom: 8px;
        }
        .stat-card .stat-label {
            color: var(--text-muted);
            font-size: 0.78em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .stat-card .stat-value {
            font-size: 1.6em;
            font-weight: 800;
            margin-top: 4px;
            line-height: 1.1;
        }
        .stat-card .stat-detail {
            color: var(--text-dim);
            font-size: 0.78em;
            margin-top: 6px;
        }
        .stat-value.text-primary { color: var(--primary-light); }
        .stat-value.text-accent { color: var(--accent-light); }
        .stat-value.text-success { color: var(--success-light); }
        .stat-value.text-warning { color: var(--warning); }

        /* TIMELINE BAR */
        .timeline-section {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid var(--border);
        }
        .timeline-section h3 {
            font-size: 1em;
            color: var(--text-muted);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }
        .timeline-bar-container {
            position: relative;
            height: 32px;
            background: var(--bg);
            border-radius: 16px;
            overflow: hidden;
        }
        .timeline-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--success));
            border-radius: 16px;
            width: 0%;
            transition: width 2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
            box-shadow: 0 0 20px var(--glow-primary);
        }
        .timeline-bar-fill span {
            font-size: 0.75em;
            font-weight: 700;
            white-space: nowrap;
        }
        .timeline-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.8em;
            color: var(--text-dim);
        }
        .timeline-markers {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
        }
        .timeline-marker {
            text-align: center;
            font-size: 0.72em;
            color: var(--text-dim);
        }
        .timeline-marker.active {
            color: var(--accent-light);
            font-weight: 600;
        }
        .timeline-marker .dot {
            width: 8px; height: 8px;
            border-radius: 50%;
            background: var(--border);
            margin: 0 auto 4px;
        }
        .timeline-marker.active .dot {
            background: var(--accent);
            box-shadow: 0 0 8px var(--glow-accent);
        }
        .timeline-marker.done .dot {
            background: var(--success);
        }

        /* COUNTDOWN */
        .countdown-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        .countdown-card {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 25px;
            border: 1px solid var(--border);
            text-align: center;
        }
        .countdown-card h3 {
            color: var(--text-muted);
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }
        .countdown-value {
            font-size: 2.5em;
            font-weight: 800;
            line-height: 1;
        }
        .countdown-unit {
            font-size: 0.85em;
            color: var(--text-muted);
            margin-top: 6px;
        }
        .countdown-detail {
            font-size: 0.78em;
            color: var(--text-dim);
            margin-top: 10px;
        }

        /* CHARTS */
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        .chart-card {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 20px;
            border: 1px solid var(--border);
        }
        .chart-card h3 {
            color: var(--text-muted);
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 15px;
        }

        /* PAYMENT TABLE */
        .table-section {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid var(--border);
        }
        .table-section h3 {
            color: var(--text-muted);
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 15px;
        }
        .table-wrap {
            overflow-x: auto;
            max-height: 400px;
            overflow-y: auto;
        }
        .table-wrap table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.82em;
        }
        .table-wrap th {
            position: sticky;
            top: 0;
            background: var(--bg-card);
            color: var(--text-muted);
            text-transform: uppercase;
            font-size: 0.8em;
            letter-spacing: 0.5px;
            padding: 10px 12px;
            text-align: left;
            border-bottom: 2px solid var(--border);
            z-index: 2;
        }
        .table-wrap td {
            padding: 8px 12px;
            border-bottom: 1px solid rgba(51, 65, 85, 0.5);
            color: var(--text-muted);
        }
        .table-wrap tr:hover td {
            background: rgba(99, 102, 241, 0.05);
        }
        .table-wrap .paid { color: var(--success); }
        .table-wrap .current-year { background: rgba(6, 182, 212, 0.05); }

        /* FINANCIAL SUMMARY */
        .summary-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        .summary-card {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 25px;
            border: 1px solid var(--border);
        }
        .summary-card h3 {
            color: var(--text-muted);
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 15px;
        }
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(51, 65, 85, 0.3);
            font-size: 0.88em;
        }
        .summary-row:last-child {
            border-bottom: none;
            font-weight: 700;
            padding-top: 12px;
            margin-top: 4px;
            border-top: 2px solid var(--border);
        }
        .summary-row .label { color: var(--text-muted); }
        .summary-row .value { font-weight: 600; }
        .summary-row .value.success { color: var(--success-light); }
        .summary-row .value.warning { color: var(--warning); }

        /* ASSEMBLIES */
        .assembly-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        .assembly-item {
            background: var(--bg);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
            border: 1px solid var(--border);
            font-size: 0.82em;
            transition: all 0.3s;
        }
        .assembly-item:hover {
            border-color: var(--primary);
        }
        .assembly-item .asm-num {
            color: var(--primary-light);
            font-weight: 700;
            font-size: 1.1em;
        }
        .assembly-item .asm-date {
            color: var(--text-muted);
            margin-top: 4px;
        }
        .assembly-item.next {
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--glow-accent);
            background: rgba(6, 182, 212, 0.08);
        }
        .assembly-item.next .asm-num { color: var(--accent-light); }

        /* FOOTER */
        .footer {
            text-align: center;
            padding: 30px 0;
            color: var(--text-dim);
            font-size: 0.8em;
        }
        .footer a {
            color: var(--primary-light);
            text-decoration: none;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .hero-section {
                grid-template-columns: 1fr;
                justify-items: center;
            }
            .hero-stats {
                width: 100%;
            }
            .countdown-section,
            .charts-grid,
            .summary-grid {
                grid-template-columns: 1fr;
            }
            .header h1 { font-size: 1.4em; }
            .ring-percent { font-size: 2.5em; }
            .stat-card .stat-value { font-size: 1.3em; }
        }

        @media (max-width: 480px) {
            .container { padding: 12px; }
            .hero-stats { grid-template-columns: 1fr; }
            .header .contract-info span { font-size: 0.7em; }
        }

        /* ANIMATIONS */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-in {
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
        }
        .animate-in:nth-child(1) { animation-delay: 0.1s; }
        .animate-in:nth-child(2) { animation-delay: 0.2s; }
        .animate-in:nth-child(3) { animation-delay: 0.3s; }
        .animate-in:nth-child(4) { animation-delay: 0.4s; }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 10px var(--glow-accent); }
            50% { box-shadow: 0 0 25px var(--glow-accent), 0 0 50px rgba(6, 182, 212, 0.1); }
        }
        .pulse { animation: pulse-glow 3s ease-in-out infinite; }
    </style>
</head>
<body>

<div class="container">

    <!-- HEADER -->
    <div class="header animate-in">
        <div class="header-icon">&#128663;</div>
        <h1>Meu Consórcio</h1>
        <div class="subtitle">Eldorado Administradora de Consórcios</div>
        <div class="contract-info">
            <span>Grupo 000519</span>
            <span>Cota 0169</span>
            <span>Contrato 62868</span>
            <span>Veículos 30K</span>
        </div>
    </div>

    <!-- MOTIVATIONAL BANNER -->
    <div class="motivation animate-in" id="motivationBanner">
        <div class="phrase" id="motivPhrase"></div>
        <div class="detail" id="motivDetail"></div>
    </div>

    <!-- HERO: RING + STATS -->
    <div class="hero-section">
        <div class="ring-container animate-in">
            <div class="progress-ring-wrap">
                <svg viewBox="0 0 250 250">
                    <defs>
                        <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#6366f1"/>
                            <stop offset="50%" stop-color="#06b6d4"/>
                            <stop offset="100%" stop-color="#10b981"/>
                        </linearGradient>
                    </defs>
                    <circle class="ring-bg" cx="125" cy="125" r="110"/>
                    <circle class="ring-fill" cx="125" cy="125" r="110" id="progressRing"/>
                </svg>
                <div class="ring-center">
                    <div class="ring-percent" id="ringPercent">0%</div>
                    <div class="ring-label">concluído</div>
                </div>
            </div>
            <div class="ring-sub">49 de 99 parcelas pagas</div>
        </div>

        <div class="hero-stats">
            <div class="stat-card animate-in">
                <div class="stat-icon">&#128176;</div>
                <div class="stat-label">Total Pago</div>
                <div class="stat-value text-success">R$ 20.313</div>
                <div class="stat-detail">Fundo comum + taxas + seguro</div>
            </div>
            <div class="stat-card animate-in">
                <div class="stat-icon">&#127919;</div>
                <div class="stat-label">Crédito do Bem</div>
                <div class="stat-value text-accent">R$ 36.056</div>
                <div class="stat-detail">Valor atual do crédito</div>
            </div>
            <div class="stat-card animate-in">
                <div class="stat-icon">&#128197;</div>
                <div class="stat-label">Parcela Atual</div>
                <div class="stat-value text-primary">R$ 459,15</div>
                <div class="stat-detail">Contribuição mensal</div>
            </div>
            <div class="stat-card animate-in">
                <div class="stat-icon">&#9203;</div>
                <div class="stat-label">Restam</div>
                <div class="stat-value text-warning">50 parcelas</div>
                <div class="stat-detail">R$ 22.961 a pagar</div>
            </div>
        </div>
    </div>

    <!-- TIMELINE BAR -->
    <div class="timeline-section animate-in">
        <h3>Linha do Tempo</h3>
        <div class="timeline-bar-container">
            <div class="timeline-bar-fill" id="timelineBar">
                <span>49/99</span>
            </div>
        </div>
        <div class="timeline-labels">
            <span>Jan/2022 - Adesão</span>
            <span id="endDateLabel">~Abr/2030 - Fim</span>
        </div>
        <div class="timeline-markers" id="timelineMarkers"></div>
    </div>

    <!-- COUNTDOWNS -->
    <div class="countdown-section">
        <div class="countdown-card pulse animate-in">
            <h3>Próxima Assembleia</h3>
            <div class="countdown-value text-accent" id="nextAssemblyDays">--</div>
            <div class="countdown-unit">dias</div>
            <div class="countdown-detail" id="nextAssemblyDate">13/03/2026 - Assembleia 51</div>
        </div>
        <div class="countdown-card animate-in">
            <h3>Tempo no Consórcio</h3>
            <div class="countdown-value text-primary" id="elapsedTime">--</div>
            <div class="countdown-unit" id="elapsedUnit">meses</div>
            <div class="countdown-detail" id="elapsedDetail">desde 03/01/2022</div>
        </div>
    </div>

    <!-- CHARTS -->
    <div class="charts-grid">
        <div class="chart-card animate-in">
            <h3>Evolução do Pagamento Acumulado</h3>
            <canvas id="chartCumulative"></canvas>
        </div>
        <div class="chart-card animate-in">
            <h3>Valor do Crédito ao Longo do Tempo</h3>
            <canvas id="chartCredit"></canvas>
        </div>
    </div>

    <div class="charts-grid">
        <div class="chart-card animate-in">
            <h3>Pago vs Restante</h3>
            <canvas id="chartDonut"></canvas>
        </div>
        <div class="chart-card animate-in">
            <h3>Valor da Parcela por Ano</h3>
            <canvas id="chartInstallment"></canvas>
        </div>
    </div>

    <!-- FINANCIAL SUMMARY -->
    <div class="summary-grid">
        <div class="summary-card animate-in">
            <h3>Valores Pagos</h3>
            <div class="summary-row"><span class="label">Fundo Comum</span><span class="value success">R$ 15.471,25</span></div>
            <div class="summary-row"><span class="label">Taxa Administração</span><span class="value">R$ 3.523,70</span></div>
            <div class="summary-row"><span class="label">Fundo Reserva</span><span class="value">R$ 161,09</span></div>
            <div class="summary-row"><span class="label">Seguro</span><span class="value">R$ 1.156,98</span></div>
            <div class="summary-row"><span class="label">Total Pago</span><span class="value success">R$ 20.313,02</span></div>
        </div>
        <div class="summary-card animate-in">
            <h3>Valores a Pagar</h3>
            <div class="summary-row"><span class="label">Fundo Comum</span><span class="value warning">R$ 19.050,89</span></div>
            <div class="summary-row"><span class="label">Taxa Administração</span><span class="value">R$ 2.420,85</span></div>
            <div class="summary-row"><span class="label">Fundo Reserva</span><span class="value">R$ 182,12</span></div>
            <div class="summary-row"><span class="label">Seguro</span><span class="value">R$ 1.307,50</span></div>
            <div class="summary-row"><span class="label">Total a Pagar</span><span class="value warning">R$ 22.961,36</span></div>
        </div>
    </div>

    <!-- NEXT ASSEMBLIES -->
    <div class="table-section animate-in">
        <h3>Próximas Assembleias</h3>
        <div class="assembly-grid" id="assemblyGrid"></div>
    </div>

    <!-- PAYMENT HISTORY TABLE -->
    <div class="table-section animate-in">
        <h3>Histórico de Pagamentos</h3>
        <div class="table-wrap">
            <table id="paymentTable">
                <thead>
                    <tr>
                        <th>Parc.</th>
                        <th>Assembleia</th>
                        <th>Pagamento</th>
                        <th>Valor Bem</th>
                        <th>Val. Pago</th>
                        <th>Seguro</th>
                        <th>% Acum.</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <div class="footer">
        Consórcio Eldorado &middot; Central de Atendimento: (84) 4008-6868
    </div>

</div>

<script>
// ===== DATA =====
const PARCELS = [
    {n:2,asm:'14/02/2022',pago:'03/01/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:0.2511},
    {n:3,asm:'14/03/2022',pago:'03/03/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:0.7642},
    {n:4,asm:'14/04/2022',pago:'01/04/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:1.2773},
    {n:5,asm:'13/05/2022',pago:'03/05/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:1.7904},
    {n:6,asm:'14/06/2022',pago:'01/06/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:2.3035},
    {n:7,asm:'14/07/2022',pago:'01/07/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:2.8166},
    {n:8,asm:'15/08/2022',pago:'01/08/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:3.3297},
    {n:9,asm:'14/09/2022',pago:'01/09/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:3.8428},
    {n:10,asm:'14/10/2022',pago:'04/10/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:4.8994},
    {n:11,asm:'14/11/2022',pago:'01/11/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:5.9560},
    {n:12,asm:'14/12/2022',pago:'01/12/2022',bem:30000,valor:382.03,seguro:21.76,pctAcum:7.0126},
    {n:13,asm:'13/01/2023',pago:'02/01/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:8.0692},
    {n:14,asm:'14/02/2023',pago:'01/02/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:9.1258},
    {n:15,asm:'14/03/2023',pago:'01/03/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:10.1824},
    {n:16,asm:'14/04/2023',pago:'03/04/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:11.2390},
    {n:17,asm:'15/05/2023',pago:'02/05/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:12.2956},
    {n:18,asm:'14/06/2023',pago:'01/06/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:13.3522},
    {n:19,asm:'14/07/2023',pago:'03/07/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:14.4088},
    {n:20,asm:'14/08/2023',pago:'01/08/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:15.4654},
    {n:21,asm:'14/09/2023',pago:'01/09/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:16.5220},
    {n:22,asm:'13/10/2023',pago:'02/10/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:17.5786},
    {n:23,asm:'14/11/2023',pago:'01/11/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:18.6352},
    {n:24,asm:'14/12/2023',pago:'01/12/2023',bem:31791,valor:404.83,seguro:23.06,pctAcum:19.6918},
    {n:25,asm:'15/01/2024',pago:'02/01/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:20.7484},
    {n:26,asm:'15/02/2024',pago:'01/02/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:21.8050},
    {n:27,asm:'14/03/2024',pago:'01/03/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:22.8616},
    {n:28,asm:'15/04/2024',pago:'01/04/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:23.9182},
    {n:29,asm:'14/05/2024',pago:'02/05/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:24.9748},
    {n:30,asm:'14/06/2024',pago:'03/06/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:26.0314},
    {n:31,asm:'15/07/2024',pago:'01/07/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:27.0880},
    {n:32,asm:'14/08/2024',pago:'01/08/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:28.1446},
    {n:33,asm:'13/09/2024',pago:'02/09/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:29.2012},
    {n:34,asm:'14/10/2024',pago:'01/10/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:30.2578},
    {n:35,asm:'14/11/2024',pago:'01/11/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:31.3144},
    {n:36,asm:'13/12/2024',pago:'02/12/2024',bem:33014.95,valor:420.43,seguro:23.95,pctAcum:32.3710},
    {n:37,asm:'14/01/2025',pago:'03/01/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:33.4276},
    {n:38,asm:'14/02/2025',pago:'03/02/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:34.4842},
    {n:39,asm:'14/03/2025',pago:'05/03/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:35.5408},
    {n:40,asm:'14/04/2025',pago:'03/04/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:36.5974},
    {n:41,asm:'14/05/2025',pago:'05/05/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:37.6540},
    {n:42,asm:'13/06/2025',pago:'03/06/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:38.7106},
    {n:43,asm:'14/07/2025',pago:'03/07/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:39.7672},
    {n:44,asm:'14/08/2025',pago:'04/08/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:40.8238},
    {n:45,asm:'15/09/2025',pago:'03/09/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:41.8804},
    {n:46,asm:'14/10/2025',pago:'06/10/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:42.9370},
    {n:47,asm:'14/11/2025',pago:'03/11/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:43.9936},
    {n:48,asm:'15/12/2025',pago:'03/12/2025',bem:34612.87,valor:440.77,seguro:25.10,pctAcum:45.0502},
    {n:49,asm:'14/01/2026',pago:'05/01/2026',bem:36056.23,valor:459.15,seguro:26.15,pctAcum:46.1068},
    {n:50,asm:'13/02/2026',pago:'03/02/2026',bem:36056.23,valor:459.15,seguro:26.15,pctAcum:47.1634},
];

const NEXT_ASSEMBLIES = [
    {n:51, date:'13/03/2026', venc:'09/03/2026'},
    {n:52, date:'14/04/2026', venc:'08/04/2026'},
    {n:53, date:'14/05/2026', venc:'08/05/2026'},
    {n:54, date:'15/06/2026', venc:'08/06/2026'},
    {n:55, date:'14/07/2026', venc:'08/07/2026'},
    {n:56, date:'14/08/2026', venc:'10/08/2026'},
    {n:57, date:'14/09/2026', venc:'08/09/2026'},
    {n:58, date:'14/10/2026', venc:'08/10/2026'},
    {n:59, date:'13/11/2026', venc:'09/11/2026'},
    {n:60, date:'14/12/2026', venc:'08/12/2026'},
    {n:61, date:'14/01/2027', venc:'08/01/2027'},
    {n:62, date:'15/02/2027', venc:'08/02/2027'},
];

const TOTAL_PARCELS = 99; // parcels 2 to 100
const PAID_PARCELS = 49;
const PERCENT_PAID = 47.1634;
const START_DATE = new Date(2022, 0, 3); // 03/01/2022

// ===== HELPERS =====
function parseDate(str) {
    const [d, m, y] = str.split('/');
    return new Date(+y, +m - 1, +d);
}

function formatBRL(val) {
    return val.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
}

function daysBetween(a, b) {
    return Math.ceil((b - a) / (1000 * 60 * 60 * 24));
}

// ===== MOTIVATION =====
function setMotivation() {
    const phrases = [
        { phrase: 'Quase na metade! Cada parcela te aproxima do seu carro.', detail: `Faltam apenas ${(50 - PERCENT_PAID).toFixed(1)}% para a metade!` },
        { phrase: 'Você já pagou quase metade. Isso é determinação!', detail: `R$ 20.313 investidos no seu futuro.` },
        { phrase: '49 parcelas pagas sem atraso. Consistência é a chave!', detail: 'Histórico impecável de pagamentos.' },
        { phrase: 'O carro dos sonhos está cada vez mais perto!', detail: `Crédito atual: R$ 36.056,23 - e continua valorizando.` },
        { phrase: 'Mais da metade do caminho já foi percorrida em tempo!', detail: `${Math.floor((new Date() - START_DATE) / (1000*60*60*24*30))} meses de dedicação.` },
    ];
    const pick = phrases[Math.floor(Math.random() * phrases.length)];
    document.getElementById('motivPhrase').textContent = pick.phrase;
    document.getElementById('motivDetail').textContent = pick.detail;
}

// ===== PROGRESS RING =====
function animateRing() {
    const ring = document.getElementById('progressRing');
    const circumference = 2 * Math.PI * 110; // r=110
    const offset = circumference * (1 - PERCENT_PAID / 100);
    setTimeout(() => {
        ring.style.strokeDashoffset = offset;
    }, 300);

    // Animate percent counter
    const el = document.getElementById('ringPercent');
    let current = 0;
    const target = PERCENT_PAID;
    const step = target / 60;
    function tick() {
        current += step;
        if (current >= target) {
            el.textContent = target.toFixed(1) + '%';
            return;
        }
        el.textContent = current.toFixed(1) + '%';
        requestAnimationFrame(tick);
    }
    setTimeout(tick, 400);
}

// ===== TIMELINE =====
function renderTimeline() {
    const bar = document.getElementById('timelineBar');
    setTimeout(() => {
        bar.style.width = PERCENT_PAID + '%';
    }, 500);

    // Year markers
    const markers = document.getElementById('timelineMarkers');
    const years = [2022, 2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030];
    const totalMonths = 99;
    const currentYear = new Date().getFullYear();
    let html = '';
    years.forEach(y => {
        const monthsFromStart = (y - 2022) * 12;
        const pct = Math.min(100, (monthsFromStart / totalMonths) * 100);
        const isDone = y < currentYear;
        const isActive = y === currentYear;
        html += `<div class="timeline-marker ${isDone ? 'done' : ''} ${isActive ? 'active' : ''}" style="position:relative;">
            <div class="dot"></div>${y}</div>`;
    });
    markers.innerHTML = html;
}

// ===== COUNTDOWN =====
function renderCountdowns() {
    const now = new Date();

    // Next assembly
    const nextAsm = NEXT_ASSEMBLIES[0];
    const nextDate = parseDate(nextAsm.date);
    const daysUntil = daysBetween(now, nextDate);
    document.getElementById('nextAssemblyDays').textContent = Math.max(0, daysUntil);
    document.getElementById('nextAssemblyDate').textContent = `${nextAsm.date} - Assembleia ${nextAsm.n}`;

    // Elapsed time
    const months = Math.floor((now - START_DATE) / (1000 * 60 * 60 * 24 * 30.44));
    document.getElementById('elapsedTime').textContent = months;
    document.getElementById('elapsedDetail').textContent = `desde 03/01/2022 (${Math.floor(months/12)} anos e ${months%12} meses)`;
}

// ===== CHARTS =====
function renderCharts() {
    const chartDefaults = {
        color: '#94a3b8',
        borderColor: '#334155',
    };
    Chart.defaults.color = chartDefaults.color;
    Chart.defaults.borderColor = chartDefaults.borderColor;

    // 1. Cumulative payments
    const cumLabels = PARCELS.map(p => `P${p.n}`);
    let cumSum = 0;
    const cumData = PARCELS.map(p => { cumSum += p.valor + p.seguro; return cumSum; });

    new Chart(document.getElementById('chartCumulative'), {
        type: 'line',
        data: {
            labels: cumLabels,
            datasets: [{
                label: 'Total Pago (R$)',
                data: cumData,
                borderColor: '#6366f1',
                backgroundColor: 'rgba(99, 102, 241, 0.1)',
                fill: true,
                borderWidth: 2.5,
                pointRadius: 0,
                pointHoverRadius: 5,
                tension: 0.3,
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: '#1e293b', titleColor: '#f1f5f9', bodyColor: '#94a3b8',
                    borderColor: '#334155', borderWidth: 1, padding: 10, cornerRadius: 8,
                    callbacks: { label: ctx => `R$ ${formatBRL(ctx.raw)}` }
                }
            },
            scales: {
                x: { display: false },
                y: { grid: { color: 'rgba(51,65,85,0.3)' }, ticks: { callback: v => `R$${(v/1000).toFixed(0)}k` } }
            }
        }
    });

    // 2. Credit value over time
    const creditYears = ['2022', '2023', '2024', '2025', '2026'];
    const creditValues = [30000, 31791, 33014.95, 34612.87, 36056.23];

    new Chart(document.getElementById('chartCredit'), {
        type: 'bar',
        data: {
            labels: creditYears,
            datasets: [{
                label: 'Valor do Crédito (R$)',
                data: creditValues,
                backgroundColor: ['rgba(6,182,212,0.6)', 'rgba(6,182,212,0.65)', 'rgba(6,182,212,0.7)', 'rgba(6,182,212,0.8)', 'rgba(6,182,212,0.9)'],
                borderColor: '#06b6d4',
                borderWidth: 1,
                borderRadius: 8,
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: '#1e293b', titleColor: '#f1f5f9', bodyColor: '#94a3b8',
                    borderColor: '#334155', borderWidth: 1, padding: 10, cornerRadius: 8,
                    callbacks: { label: ctx => `R$ ${formatBRL(ctx.raw)}` }
                }
            },
            scales: {
                x: { grid: { display: false } },
                y: { grid: { color: 'rgba(51,65,85,0.3)' }, ticks: { callback: v => `R$${(v/1000).toFixed(0)}k` }, beginAtZero: false, min: 28000 }
            }
        }
    });

    // 3. Donut: Paid vs Remaining
    new Chart(document.getElementById('chartDonut'), {
        type: 'doughnut',
        data: {
            labels: ['Pago', 'Restante'],
            datasets: [{
                data: [20313.02, 22961.36],
                backgroundColor: ['#10b981', '#334155'],
                borderColor: ['#10b981', '#475569'],
                borderWidth: 2,
                hoverOffset: 8,
            }]
        },
        options: {
            responsive: true,
            cutout: '65%',
            plugins: {
                legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20, font: { size: 13 } } },
                tooltip: {
                    backgroundColor: '#1e293b', titleColor: '#f1f5f9', bodyColor: '#94a3b8',
                    borderColor: '#334155', borderWidth: 1, padding: 10, cornerRadius: 8,
                    callbacks: { label: ctx => ` R$ ${formatBRL(ctx.raw)} (${(ctx.raw / (20313.02 + 22961.36) * 100).toFixed(1)}%)` }
                }
            }
        }
    });

    // 4. Installment value per year
    new Chart(document.getElementById('chartInstallment'), {
        type: 'bar',
        data: {
            labels: ['2022', '2023', '2024', '2025', '2026'],
            datasets: [{
                label: 'Valor Parcela (R$)',
                data: [382.03, 404.83, 420.43, 440.77, 459.15],
                backgroundColor: 'rgba(99, 102, 241, 0.7)',
                borderColor: '#6366f1',
                borderWidth: 1,
                borderRadius: 8,
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: '#1e293b', titleColor: '#f1f5f9', bodyColor: '#94a3b8',
                    borderColor: '#334155', borderWidth: 1, padding: 10, cornerRadius: 8,
                    callbacks: { label: ctx => `R$ ${formatBRL(ctx.raw)}` }
                }
            },
            scales: {
                x: { grid: { display: false } },
                y: { grid: { color: 'rgba(51,65,85,0.3)' }, beginAtZero: false, min: 350, ticks: { callback: v => `R$${v}` } }
            }
        }
    });
}

// ===== NEXT ASSEMBLIES =====
function renderAssemblies() {
    const grid = document.getElementById('assemblyGrid');
    let html = '';
    NEXT_ASSEMBLIES.forEach((a, i) => {
        html += `<div class="assembly-item ${i === 0 ? 'next' : ''}">
            <div class="asm-num">#${a.n}</div>
            <div class="asm-date">${a.date}</div>
        </div>`;
    });
    grid.innerHTML = html;
}

// ===== PAYMENT TABLE =====
function renderPaymentTable() {
    const tbody = document.querySelector('#paymentTable tbody');
    let cumPct = 0;
    let html = '';
    PARCELS.forEach(p => {
        cumPct = p.pctAcum;
        const year = p.asm.split('/')[2];
        const isCurrent = year === '2026';
        html += `<tr class="${isCurrent ? 'current-year' : ''}">
            <td class="paid">${String(p.n).padStart(3, '0')}</td>
            <td>${p.asm}</td>
            <td>${p.pago}</td>
            <td>R$ ${formatBRL(p.bem)}</td>
            <td class="paid">R$ ${formatBRL(p.valor)}</td>
            <td>R$ ${formatBRL(p.seguro)}</td>
            <td>${cumPct.toFixed(2)}%</td>
        </tr>`;
    });
    tbody.innerHTML = html;
}

// ===== INIT =====
setMotivation();
animateRing();
renderTimeline();
renderCountdowns();
renderCharts();
renderAssemblies();
renderPaymentTable();
</script>

</body>
</html>
